<!--
  -  Copyright 2014 Graz University of Technology - KTI (Knowledge Technologies Institute)
  - 
  -  Licensed under the Apache License, Version 2.0 (the "License");
  -  you may not use this file except in compliance with the License.
  -  You may obtain a copy of the License at
  - 
  -  http://www.apache.org/licenses/LICENSE-2.0
  - 
  -  Unless required by applicable law or agreed to in writing, software
  -  distributed under the License is distributed on an "AS IS" BASIS,
  -  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  -  See the License for the specific language governing permissions and
  -  limitations under the License.
-->

<div class="modal-content" ng-controller="AddResourceController">
    <div class="modal-header">
        <button type="button" class="close" ng-click="closeWizzard()" aria-hidden="true">&times;</button>
        <h4 class="modal-title"><span class="glyphicon glyphicon-cloud-upload" style="margin-right:10px;"></span>{{getCurrentWizzardTitle()}}</h4>
    </div>
    <div class="modal-body" ng-controller="UploadController">

        <div>
            <form name="upload" role="form" class="form-horizontal">

                <div class="form-group">
                    <div class="col-lg-7 text-center ">
                        <div class="wizzard-heading">
                            <!--  <div class="wizzard-heading-top">{{t('upload_resource_info')}}</div>-->
                            <div class="wizzard-heading-bottom">{{t('upload_resource_info_subline_part1')}}<br>{{t('upload_resource_info_subline_part2')}}</div>
                            <span class="btn btn-default fileinput-button">
                                <i class="glyphicon glyphicon-plus"></i>
                                <span>{{t('upload_label')}}</span>
                                <input type="file" name="files[]" multiple="" ng-model="uploadfiles" onchange="angular.element(this).scope().appendFileListToUploadList(this.files)">
                            </span>
                        </div>
                    </div>
                    <div class="col-lg-5 text-center ">
                        <div class="upload-drop-container">
                            <div id="drop-container-text">{{t('drag_and_drop')}}</div>
                            <div id="drop-container-subline">{{t('drag_and_drop_subline')}}</div>
                            <span class="glyphicon glyphicon-hand-down"></span>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>


                <div id="resourceUploadWidget" class="col-lg-12" ng-show="showUploadWidget()">
                    <div id="resourceUploadWidgetToolbar">
                        <div class="btn-group col-md-9">
                            <button class="btn btn-success" ng-click="uploadAllFiles()"><i class="glyphicon glyphicon-cloud-upload"></i>&nbsp;{{t('upload_all')}}</button>
                            <button class="btn btn-danger" ng-click="resetUploader()"><i class="glyphicon glyphicon-trash"></i>&nbsp;{{t('clear_file_list')}}</button>
                        </div>
                        <div class="col-md-3 text-align-right" style="margin-top:5px;">{{filesArray.length}}&nbsp;{{t('file_s')}}.</div>
                        <div class="clearfix"></div>
                    </div>
                    <div id="resourceUploadWidgetFilesWrapper" >
                        <div ng-repeat="file in filesArray">

                            <div class="uploadFileWrapper">

                                <div class="uploadFile" ng-show="file.isFile">
                                    <div class="col-xs-10" style="margin-bottom: 10px; padding-left: 4px;">

                                        <div class="col-xs-2" style="display:inline-block; padding:0px;">
                                            <div ng-show="!file.uploading && !file.uploaded" class="glyphicon glyphicon-file"></div>
                                            <div ng-show="file.uploading && !file.uploaded" class="ajax-loader-light-grey-xs"></div>
                                            <div ng-show="file.uploaded" class="resourceUploadWidgetFileUploadedIcon glyphicon glyphicon-ok-circle" ></div>
                                        </div>

                                        <div class="col-xs-10" class="padding-zero" style="display:inline-block; padding-left:0px;">
                                            <span><b>{{t('filename')}}</b> {{file.name}}</span>
                                            <span class="upload-additional-file-info">
                                                <br>
                                                <span><b>{{t('file_type')}}</b> <span ng-hide="!file.type"> {{file.type}}</span><span ng-hide="file.type"> {{t('unknown')}}</span></span>
                                                <br>
                                                <span><b>{{t('file_size')}}</b> {{getFileSizeString(file.size)}}</span>
                                            </span>
                                        </div>
                                        <div class="clearfix"></div>

                                    </div>
                                    <div class="col-xs-2" style="padding-right:2px;">

                                        <div ng-show="file.uploaded">
                                            <button class="btn btn-default btn-xs" style="float: right;" ng-click="openEntry($index)" type="button">{{t('open')}}</button>
                                        </div>

                                        <div class="btn btn-group-xs" ng-show="!file.uploaded" style="padding:0px; float: right;">
                                            <button class="btn btn-danger" ng-click="removeFromUploadList($index)" ng-show="!file.uploading && !file.uploaded">
                                                <i class="glyphicon glyphicon-trash"></i>
                                            </button>
                                            <div class="clearfix"></div>
                                        </div>

                                    </div>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="uploadFile" ng-show="!file.isFile">
                                    <div class="col-xs-10" style="margin-bottom: 10px; padding-left: 4px;">
                                        <div class="col-xs-2" style="display:inline-block; padding:0px;">
                                            <span  class="glyphicon glyphicon-warning-sign"></span>
                                        </div>
                                        <div class="col-xs-10" class="padding-zero" style="display:inline-block; padding-left:0px;">
                                            <b>{{t('foldername')}}:</b> {{file.name}}
                                            <br> <i>{{t('no_folders_allowed')}}</i> <br> <i>{{t('entry_will_be_skipped')}}</i>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="col-xs-2" style="padding-right:2px;">
                                        <div class="btn btn-group-xs" ng-show="!file.uploaded" style="padding:0px; float: right;">
                                            <button class="btn btn-danger" ng-click="removeFromUploadList($index)">
                                                <i class="glyphicon glyphicon-trash"></i>
                                            </button>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </form>
            <div class="clearfix"></div>
        </div>
        <div class="modal-footer">  
            <button type="button" class="btn btn-default" ng-click="backToChoose()">{{t('back')}}</button>
            <div>
                <button class="btn btn-primary" ng-click="closeWizzard()">{{t('close')}}</button>
            </div>
        </div>

    </div>
</div>
